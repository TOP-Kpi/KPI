<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‰ ç”Ÿæ—¥å¿«ä¹ï¼ğŸ‰</title>
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css">
    
    <style>
        body {
            font-family: 'Microsoft JhengHei', 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(to bottom right, #ffe0f0, #cce5ff); /* æ²¿ç”¨ç¬¬ä¸€å€‹æª”æ¡ˆçš„èƒŒæ™¯è‰² */
            color: #d81b60;
            text-align: center;
            flex-direction: column;
            overflow-x: hidden;
            position: relative;
        }

        .birthday-card {
            background-color: #ffffff;
            padding: 40px 60px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            animation: bounceIn 1s ease-out;
            max-width: 90%;
            width: 500px; /* çµ¦ä¸€å€‹åŸºæº–å¯¬åº¦ */
            box-sizing: border-box;
            position: relative;
            z-index: 10;
        }

        h1 {
            font-size: 2.8em; /* èª¿æ•´å¤§å°ä»¥é©æ‡‰å¡ç‰‡ */
            margin-bottom: 20px;
            color: #e91e63;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        #countdown {
            font-size: 1.5em; /* èª¿æ•´å¤§å° */
            font-weight: bold;
            color: #880e4f;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        button {
            margin-top: 20px;
            padding: 10px 25px;
            background-color: #ff69b4;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #ff85c1;
        }

        /* ä¾†è‡ªç¬¬äºŒå€‹æª”æ¡ˆçš„ç²¾ç¾ç´™å±‘å‹•ç•« */
        .confetti {
            position: fixed; /* ä½¿ç”¨fixedç¢ºä¿å…¨è¢å¹•æ‰è½ */
            width: 10px;
            height: 10px;
            background-color: #ff6b6b;
            top: -10px;
            animation: fall linear infinite;
            opacity: 0.8;
            border-radius: 20%; /* å¯ä»¥æ˜¯æ–¹å½¢æˆ–åœ“å½¢ */
            z-index: 1;
        }

        @keyframes fall {
            0% {
                transform: translateY(0) rotateZ(0deg);
                opacity: 0.8;
            }
            100% {
                transform: translateY(100vh) rotateZ(720deg);
                opacity: 0;
            }
        }

        @keyframes bounceIn {
            0% { opacity: 0; transform: translateY(-100px); }
            60% { opacity: 1; transform: translateY(20px); }
            100% { transform: translateY(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* ä¾†è‡ªç¬¬äºŒå€‹æª”æ¡ˆçš„ç²¾ç¾ç¥ç¦å½ˆçª—æ¨£å¼ */
        .message-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease-out;
        }

        .message-box {
            background: linear-gradient(135deg, #f06292, #ef5350);
            color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.4);
            max-width: 80%;
            text-align: center;
            transform: scale(0.9);
            animation: popIn 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
        }
        .message-box p {
            font-size: 1.8em;
            margin-bottom: 25px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        .message-box button {
            background-color: #ffb74d;
            color: #880e4f;
        }
        .message-box button:hover {
            background-color: #ff9800;
        }

        @keyframes popIn {
            0% { transform: scale(0.7); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        #audio-container {
            margin: 20px auto;
            max-width: 400px;
        }
        .plyr--audio .plyr__controls {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            color: #d81b60;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .birthday-card { padding: 30px 40px; }
            h1 { font-size: 2.5em; }
            #countdown { font-size: 1.2em; }
            .message-box p { font-size: 1.5em; }
        }
        @media (max-width: 480px) {
            .birthday-card { padding: 20px 25px; }
            h1 { font-size: 2em; }
            #countdown { font-size: 1em; }
            .message-box p { font-size: 1.2em; }
        }
    </style>
</head>
<body>
    <div class="birthday-card">
        <h1>ğŸ‰ ç”Ÿæ—¥å¿«ä¹ï¼ğŸ‰</h1>
        <img src="https://via.placeholder.com/200x200?text=ç”Ÿæ—¥ç…§" alt="ç”Ÿæ—¥ç…§ç‰‡" 
             style="width: 200px; height: 200px; border-radius: 50%; margin: 30px;"
             id="birthday-photo">
        
        <div id="countdown"></div>
        
        <div id="audio-container">
            <audio id="audio-player" controls playsinline></audio>
        </div>
        
        <button onclick="toggleMessage()">æ˜¾ç¤ºç¥ç¦</button>
    </div>

    <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
    
    <script>
        const birthday = new Date("2025-06-25T12:00:00");
        const countdownElement = document.getElementById('countdown');
        const mainHeader = document.querySelector('.birthday-card h1');

        let countdownInterval;
        let birthdayReached = false;

        function updateCountdown() {
            if (birthdayReached) return;

            const now = new Date();
            const diff = birthday - now;

            if (diff <= 0) {
                birthdayReached = true;
                clearInterval(countdownInterval);
                
                countdownElement.style.display = 'none';
                mainHeader.innerHTML = "ğŸ‚ å°±æ˜¯ç°åœ¨ï¼ç”Ÿæ—¥å¿«ä¹ï¼ ğŸ‚";
                mainHeader.style.animation = "pulse 1.5s infinite"; // æ·»åŠ ä¸€å€‹è·³å‹•ç‰¹æ•ˆ
                
                createConfetti(200);

                player.play().catch(error => {
                    console.warn('åº†ç¥æ—¶åˆ»çš„è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼š', error);
                });

                const finalMessage = "ğŸŒŸ æ„¿æœ›æˆçœŸï¼Œç¾æ¢¦æˆçœŸï¼æ–°çš„ä¸€å²ï¼Œæœªæ¥å¯æœŸï¼ ğŸŒŸ";
                setTimeout(() => { toggleMessage(finalMessage); }, 1000); // å»¶é²1ç§’å½ˆå‡ºï¼Œæ›´æœ‰ç¯€å¥æ„Ÿ

            } else {
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                countdownElement.innerHTML = `è·ç¦»ç”Ÿæ—¥è¿˜æœ‰ï¼š${days} å¤© ${hours} å°æ—¶ ${minutes} åˆ†é’Ÿ ${seconds} ç§’`;
            }
        }

        countdownInterval = setInterval(updateCountdown, 1000);
        updateCountdown();

        const player = new Plyr('#audio-player', {
            controls: ['play', 'progress', 'current-time', 'mute', 'volume'],
            iconUrl: 'https://cdn.plyr.io/3.7.8/plyr.svg'
        });

        function createConfetti(count = 30) { // åˆå§‹ç´™å±‘æ•¸é‡èª¿æ•´
            const colors = ['#ff6b6b', '#4ecdc4', '#ffd700', '#e84393', '#6a0572', '#ff8c00'];
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.animationDelay = `${Math.random() * 5}s`;
                confetti.style.animationDuration = `${5 + Math.random() * 5}s`;
                document.body.appendChild(confetti);
            }
        }
        createConfetti();

        const messages = [
            "ğŸ‰ æ„¿ä½ çš„æ¯ä¸€å¤©éƒ½å……æ»¡é˜³å…‰å’Œæ¬¢ç¬‘ï¼",
            "ğŸ‚ æ–°çš„ä¸€å²è¦ç»§ç»­é—ªé—ªå‘å…‰å“¦ï½",
            "ğŸ æ‰€æœ‰ç¾å¥½éƒ½å¦‚æœŸè€Œè‡³ï¼",
            "ğŸŒŸ ç¥ä¸–ç•Œä¸Šæœ€æ£’çš„äººç”Ÿæ—¥å¿«ä¹ï¼",
            "ğŸ’– æ„¿ä½ çš„ç”Ÿæ´»æ¯”èœœç³–è¿˜ç”œï¼",
            "ğŸˆ æ„¿ä½ å²å²å¹³å®‰ï¼Œæœæœæš®æš®å¹¸ç¦ï¼",
            "å…¶å®æƒ³è¡¨ç™½çš„,ä½†è¿™æ ·æˆ‘å¤ªè‡ªç§äº†" // ä¿ç•™äº†ä½ æ·»åŠ çš„é€™å¥è©±
        ];

        function toggleMessage(specificMessage = null) {
            const message = specificMessage || messages[Math.floor(Math.random() * messages.length)];
            const overlay = document.createElement('div');
            overlay.className = 'message-overlay';
            overlay.innerHTML = `
                <div class="message-box">
                    <p>${message}</p>
                    <button onclick="this.parentElement.parentElement.remove()">å…³é—­</button>
                </div>
            `;
            document.body.appendChild(overlay);
        }

        function loadImage(url) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = () => resolve(img.src);
                img.onerror = () => reject('å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥é“¾æ¥æˆ–æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚');
                img.src = url;
            });
        }

        function showError(message) {
            alert(`âš ï¸ é”™è¯¯æç¤ºï¼š${message}`);
        }

        window.onload = async () => {
            const photoUrl = 'https://imgur.la/images/2025/06/12/10000486179641f9a3209d337d.jpg';
            try {
                const loadedPhotoUrl = await loadImage(photoUrl);
                document.getElementById('birthday-photo').src = loadedPhotoUrl;
            } catch (error) {
                showError(error);
                document.getElementById('birthday-photo').src = "https://via.placeholder.com/200x200?text=å›¾ç‰‡åŠ è½½å¤±è´¥";
            }

            const audioUrl = 'https://dlink.host/musics/aHR0cHM6Ly9vbmVkcnYtbXkuc2hhcmVwb2ludC5jb20vOnU6L2cvcGVyc29uYWwvc3Rvcl9vbmVkcnZfb25taWNyb3NvZnRfY29tL0VjbFBZYjRfVk1CTm00REhHZnpHYTFJQlBHdFExM3ZFUThCUGs4d1hQX2x4dUE.mp3';
            const audioPlayer = document.getElementById('audio-player');
            audioPlayer.innerHTML = `<source src="${audioUrl}" type="audio/mpeg">æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚`;
            player.source = {
                type: 'audio',
                sources: [{ src: audioUrl, type: 'audio/mpeg' }]
            };
        };
    </script>
</body>
</html>
